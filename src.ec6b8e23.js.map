{"version":3,"sources":["js/sceneInfo.ts","js/calcValue.ts","js/main.ts","js/setLayout.ts","js/setCanvasImages.ts","js/init.ts","index.ts"],"names":[],"mappings":"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","file":"src.ec6b8e23.js","sourceRoot":"../src","sourcesContent":["export interface ValueProps {\n  in: number;\n  out: number;\n  start: number;\n  end: number;\n}\n\nexport interface Section1Values {\n  videoImageCount: number;\n  imageSequence: ValueProps;\n  canvas_opacity: ValueProps;\n  messageA_opacity_in: ValueProps;\n  messageA_opacity_out: ValueProps;\n  messageA_translateY_in: ValueProps;\n  messageA_translateY_out: ValueProps;\n  messageB_opacity_in: ValueProps;\n  messageB_opacity_out: ValueProps;\n  messageB_translateY_in: ValueProps;\n  messageB_translateY_out: ValueProps;\n  messageC_opacity_in: ValueProps;\n  messageC_opacity_out: ValueProps;\n  messageC_translateY_in: ValueProps;\n  messageC_translateY_out: ValueProps;\n  messageD_opacity_in: ValueProps;\n  messageD_opacity_out: ValueProps;\n  messageD_translateY_in: ValueProps;\n  messageD_translateY_out: ValueProps;\n}\n\nexport interface Section2Values {\n  videoImageCount: number;\n  imageSequence: ValueProps;\n  canvas_opacity_in: ValueProps;\n  canvas_opacity_out: ValueProps;\n  messageA_opacity_in: ValueProps;\n  messageA_opacity_out: ValueProps;\n  messageA_translateY_in: ValueProps;\n  messageA_translateY_out: ValueProps;\n  messageB_opacity_in: ValueProps;\n  messageB_opacity_out: ValueProps;\n  messageB_translateY_in: ValueProps;\n  messageB_translateY_out: ValueProps;\n  messageC_opacity_in: ValueProps;\n  messageC_opacity_out: ValueProps;\n  messageC_translateY_in: ValueProps;\n  messageC_translateY_out: ValueProps;\n  pinB_scaleY: ValueProps;\n  pinB_opacity_in: ValueProps;\n  pinB_opacity_out: ValueProps;\n  pinC_scaleY: ValueProps;\n  pinC_opacity_in: ValueProps;\n  pinC_opacity_out: ValueProps;\n}\n\nexport interface Section1Objs {\n  container: HTMLDivElement;\n  messageA: HTMLDivElement;\n  messageB: HTMLDivElement;\n  messageC: HTMLDivElement;\n  messageD: HTMLDivElement;\n  canvas: HTMLCanvasElement;\n  context: CanvasRenderingContext2D;\n  videoImages: HTMLImageElement[];\n}\n\nexport interface Section2Objs {\n  container: HTMLDivElement;\n  messageA: HTMLDivElement;\n  messageB: HTMLDivElement;\n  messageC: HTMLDivElement;\n  pinB: HTMLDivElement;\n  pinC: HTMLDivElement;\n  canvas: HTMLCanvasElement;\n  context: CanvasRenderingContext2D;\n  videoImages: HTMLImageElement[];\n}\n\nexport interface Section3Objs {\n  container: HTMLDivElement;\n  canvasCaption: HTMLDivElement;\n  canvas: HTMLCanvasElement;\n  context: CanvasRenderingContext2D;\n  imagesPath: string[];\n  images: HTMLImageElement[];\n}\n\nexport interface Section3Values {\n  rect1X: ValueProps;\n  rect2X: ValueProps;\n  imageBlendHeight: ValueProps;\n  canvas_scale: ValueProps;\n  canvasCaption_opacity: ValueProps;\n  canvasCaption_translateY: ValueProps;\n  rectStartY: number;\n}\n\ntype sceneInfo = [\n  { type: string; heightNum: number; scrollHeight: number; objs: Section1Objs; values: Section1Values },\n  { type: string; heightNum: number; scrollHeight: number; objs: { container: HTMLDivElement }; values: null },\n  { type: string; heightNum: number; scrollHeight: number; objs: Section2Objs; values: Section2Values },\n  {\n    type: string;\n    heightNum: number;\n    scrollHeight: number;\n    objs: { container: HTMLDivElement };\n    values: Section3Values;\n  },\n];\n\nexport const sceneInfo: sceneInfo = [\n  {\n    // 0\n    type: \"sticky\",\n    heightNum: 5, // 브라우저 높이의 5배로 scrollHeight 세팅\n    scrollHeight: 0,\n    objs: {\n      container: document.querySelector(\"#scroll-section-0\"),\n      messageA: document.querySelector(\"#scroll-section-0 .main-message.a\"),\n      messageB: document.querySelector(\"#scroll-section-0 .main-message.b\"),\n      messageC: document.querySelector(\"#scroll-section-0 .main-message.c\"),\n      messageD: document.querySelector(\"#scroll-section-0 .main-message.d\"),\n      canvas: document.querySelector(\"#video-canvas-0\"),\n      context: (document.querySelector(\"#video-canvas-0\") as HTMLCanvasElement).getContext(\"2d\"),\n      videoImages: [],\n    } as Section1Objs,\n    values: {\n      videoImageCount: 181,\n      imageSequence: { in: 0, out: 180, start: 0, end: 1 },\n      canvas_opacity: { in: 1, out: 0, start: 0.9, end: 1 },\n      messageA_opacity_in: { in: 0, out: 1, start: 0.1, end: 0.2 },\n      messageA_opacity_out: { in: 1, out: 0, start: 0.25, end: 0.3 },\n      messageA_translateY_in: { in: 20, out: 0, start: 0.1, end: 0.2 },\n      messageA_translateY_out: { in: 0, out: -20, start: 0.25, end: 0.3 },\n      messageB_opacity_in: { in: 0, out: 1, start: 0.3, end: 0.4 },\n      messageB_opacity_out: { in: 1, out: 0, start: 0.45, end: 0.5 },\n      messageB_translateY_in: { in: 20, out: 0, start: 0.3, end: 0.4 },\n      messageB_translateY_out: { in: 0, out: -20, start: 0.45, end: 0.5 },\n      messageC_opacity_in: { in: 0, out: 1, start: 0.5, end: 0.6 },\n      messageC_opacity_out: { in: 1, out: 0, start: 0.65, end: 0.7 },\n      messageC_translateY_in: { in: 20, out: 0, start: 0.5, end: 0.6 },\n      messageC_translateY_out: { in: 0, out: -20, start: 0.65, end: 0.7 },\n      messageD_opacity_in: { in: 0, out: 1, start: 0.7, end: 0.8 },\n      messageD_opacity_out: { in: 1, out: 0, start: 0.85, end: 0.9 },\n      messageD_translateY_in: { in: 20, out: 0, start: 0.7, end: 0.8 },\n      messageD_translateY_out: { in: 0, out: -20, start: 0.85, end: 0.9 },\n    } as Section1Values,\n  },\n  {\n    // 1\n    type: \"normal\",\n    heightNum: 5, // 브라우저 높이의 5배로 scrollHeight 세팅\n    scrollHeight: 0,\n    objs: {\n      container: document.querySelector(\"#scroll-section-1\") as HTMLDivElement,\n    },\n    values: null,\n  },\n  {\n    // 2\n    type: \"sticky\",\n    heightNum: 5, // 브라우저 높이의 5배로 scrollHeight 세팅\n    scrollHeight: 0,\n    objs: {\n      container: document.querySelector(\"#scroll-section-2\"),\n      messageA: document.querySelector(\"#scroll-section-2 .a\"),\n      messageB: document.querySelector(\"#scroll-section-2 .b\"),\n      messageC: document.querySelector(\"#scroll-section-2 .c\"),\n      pinB: document.querySelector(\"#scroll-section-2 .b .pin\"),\n      pinC: document.querySelector(\"#scroll-section-2 .c .pin\"),\n      canvas: document.querySelector(\"#video-canvas-1\"),\n      context: (document.querySelector(\"#video-canvas-1\") as HTMLCanvasElement).getContext(\"2d\"),\n      videoImages: [],\n    } as Section2Objs,\n    values: {\n      videoImageCount: 58,\n      imageSequence: { in: 0, out: 57, start: 0, end: 1 },\n      canvas_opacity_in: { in: 0, out: 1, start: 0, end: 0.1 },\n      canvas_opacity_out: { in: 1, out: 0, start: 0.95, end: 1 },\n      messageA_translateY_in: { in: 20, out: 0, start: 0.15, end: 0.2 },\n      messageB_translateY_in: { in: 30, out: 0, start: 0.6, end: 0.65 },\n      messageC_translateY_in: { in: 30, out: 0, start: 0.87, end: 0.92 },\n      messageA_opacity_in: { in: 0, out: 1, start: 0.25, end: 0.3 },\n      messageB_opacity_in: { in: 0, out: 1, start: 0.6, end: 0.65 },\n      messageC_opacity_in: { in: 0, out: 1, start: 0.87, end: 0.92 },\n      messageA_translateY_out: { in: 0, out: -20, start: 0.4, end: 0.45 },\n      messageB_translateY_out: { in: 0, out: -20, start: 0.68, end: 0.73 },\n      messageC_translateY_out: { in: 0, out: -20, start: 0.95, end: 1 },\n      messageA_opacity_out: { in: 1, out: 0, start: 0.4, end: 0.45 },\n      messageB_opacity_out: { in: 1, out: 0, start: 0.68, end: 0.73 },\n      messageC_opacity_out: { in: 1, out: 0, start: 0.95, end: 1 },\n      pinB_opacity_in: { in: 0, out: 1, start: 0.6, end: 0.65 },\n      pinB_opacity_out: { in: 1, out: 0, start: 0.68, end: 0.73 },\n      pinB_scaleY: { in: 0.5, out: 1, start: 0.6, end: 0.65 },\n      pinC_opacity_in: { in: 0, out: 1, start: 0.87, end: 0.92 },\n      pinC_opacity_out: { in: 1, out: 0, start: 0.95, end: 1 },\n      pinC_scaleY: { in: 0.5, out: 1, start: 0.87, end: 0.92 },\n    } as Section2Values,\n  },\n  {\n    // 3\n    type: \"sticky\",\n    heightNum: 5, // 브라우저 높이의 5배로 scrollHeight 세팅\n    scrollHeight: 0,\n    objs: {\n      container: document.querySelector(\"#scroll-section-3\"),\n      canvasCaption: document.querySelector(\".canvas-caption\"),\n      canvas: document.querySelector(\".image-blend-canvas\"),\n      context: (document.querySelector(\".image-blend-canvas\") as HTMLCanvasElement).getContext(\"2d\"),\n      imagesPath: [\"./images/EPAS.JPG\", \"./images/MullaeInstant.png\"],\n      images: [],\n    } as Section3Objs,\n    values: {\n      rect1X: { in: 0, out: 0, start: 0, end: 0 },\n      rect2X: { in: 0, out: 0, start: 0, end: 0 },\n      imageBlendHeight: { in: 0, out: 0, start: 0, end: 0 },\n      canvas_scale: {in: 0, out: 0, start: 0, end: 0},\n      canvasCaption_opacity: {in: 0, out: 1, start: 0, end: 0},\n      canvasCaption_translateY: {in: 20, out: 0, start: 0, end: 0},\n      rectStartY: 0,\n    },\n  },\n];\n","import { sceneInfo, ValueProps } from \"./sceneInfo\";\n\nexport function calcValues(values: ValueProps | undefined, currentYOffet: number, currentScene: number) {\n  // 현재 씬(스크롤섹션)에서 스크롤된 범위를 비율로 구하기\n  if (!values) return 0;\n  let rv;\n  const scrollHeight = sceneInfo[currentScene].scrollHeight;\n  const scrollRatio = currentYOffet / scrollHeight;\n  let partScrollStart = 0;\n  let partScrollEnd = 0;\n  let partScrollHeight = 0;\n  if (values.start !== undefined && values.end !== undefined) {\n    partScrollStart = values.start * scrollHeight;\n    partScrollEnd = values.end * scrollHeight;\n    partScrollHeight = partScrollEnd - partScrollStart;\n    if (currentYOffet < partScrollStart) {\n      rv = values.in;\n    } else if (currentYOffet > partScrollEnd) {\n      rv = values.out;\n    } else {\n      rv = ((currentYOffet - partScrollStart) / partScrollHeight) * (values.out - values.in) + values.in;\n    }\n  } else {\n    rv = (values.out - values.in) * scrollRatio + values.in;\n  }\n  return rv;\n}\n","import {\n  sceneInfo,\n  Section1Objs,\n  Section1Values,\n  Section2Objs,\n  Section2Values,\n  Section3Objs,\n  Section3Values,\n} from \"./sceneInfo\";\nimport { calcValues } from \"./calcValue\";\nimport { smoothingVideo } from \"./init\";\n\nlet scene1 = true;\nlet scene2 = true;\n\nexport function playAnimation(yOffset: number, prevScrollHeight: number, currentScene: number) {\n  const objs = sceneInfo[currentScene].objs;\n  const values = sceneInfo[currentScene].values;\n  const currentYOffset = yOffset - prevScrollHeight;\n  const scrollHeight = sceneInfo[currentScene].scrollHeight;\n  const scrollRatio = currentYOffset / scrollHeight;\n  switch (currentScene) {\n    case 0: {\n      const {\n        messageA_opacity_in,\n        messageA_opacity_out,\n        messageA_translateY_in,\n        messageA_translateY_out,\n        messageB_opacity_in,\n        messageB_opacity_out,\n        messageB_translateY_in,\n        messageB_translateY_out,\n        messageC_opacity_in,\n        messageC_opacity_out,\n        messageC_translateY_in,\n        messageC_translateY_out,\n        messageD_opacity_in,\n        messageD_opacity_out,\n        messageD_translateY_in,\n        messageD_translateY_out,\n        imageSequence,\n        canvas_opacity,\n      } = values as Section1Values;\n      const { messageA, messageB, messageC, messageD, canvas, context, videoImages } = objs as Section1Objs;\n      const triggerA = ((messageA_opacity_in.end || 0) + (messageA_opacity_out.start || 0)) / 2;\n      const triggerB = ((messageB_opacity_in.end || 0) + (messageB_opacity_out.start || 0)) / 2;\n      const triggerC = ((messageC_opacity_in.end || 0) + (messageC_opacity_out.start || 0)) / 2;\n      const triggerD = ((messageD_opacity_in?.end || 0) + (messageD_opacity_out?.start || 0)) / 2;\n      if (scene1) {\n        smoothingVideo(prevScrollHeight, imageSequence, videoImages, canvas, context);\n        scene1 = false;\n      }\n      // const sequence = Math.round(calcValues(imageSequence, currentYOffset, currentScene));\n      // context.drawImage(videoImages[sequence], 0, 0);\n      canvas.style.opacity = `${calcValues(canvas_opacity, currentYOffset, currentScene)}`;\n\n      if (scrollRatio <= triggerA) {\n        // in\n        messageA.style.opacity = `${calcValues(messageA_opacity_in, currentYOffset, currentScene)}`;\n        messageA.style.transform = `translate3d(0, ${calcValues(\n          messageA_translateY_in,\n          currentYOffset,\n          currentScene,\n        )}%, 0)`;\n      } else {\n        // out\n        messageA.style.opacity = `${calcValues(messageA_opacity_out, currentYOffset, currentScene)}`;\n        messageA.style.transform = `translate3d(0, ${calcValues(\n          messageA_translateY_out,\n          currentYOffset,\n          currentScene,\n        )}%, 0)`;\n      }\n      if (scrollRatio <= triggerB) {\n        // in\n        messageB.style.opacity = `${calcValues(messageB_opacity_in, currentYOffset, currentScene)}`;\n        messageB.style.transform = `translate3d(0, ${calcValues(\n          messageB_translateY_in,\n          currentYOffset,\n          currentScene,\n        )}%, 0)`;\n      } else {\n        // out\n        messageB.style.opacity = `${calcValues(messageB_opacity_out, currentYOffset, currentScene)}`;\n        messageB.style.transform = `translate3d(0, ${calcValues(\n          messageB_translateY_out,\n          currentYOffset,\n          currentScene,\n        )}%, 0)`;\n      }\n      if (scrollRatio <= triggerC) {\n        // in\n        messageC.style.opacity = `${calcValues(messageC_opacity_in, currentYOffset, currentScene)}`;\n        messageC.style.transform = `translate3d(0, ${calcValues(\n          messageC_translateY_in,\n          currentYOffset,\n          currentScene,\n        )}%, 0)`;\n      } else {\n        // out\n        messageC.style.opacity = `${calcValues(messageC_opacity_out, currentYOffset, currentScene)}`;\n        messageC.style.transform = `translate3d(0, ${calcValues(\n          messageC_translateY_out,\n          currentYOffset,\n          currentScene,\n        )}%, 0)`;\n      }\n      if (scrollRatio <= triggerD) {\n        // in\n        messageD.style.opacity = `${calcValues(messageD_opacity_in, currentYOffset, currentScene)}`;\n        messageD.style.transform = `translate3d(0, ${calcValues(\n          messageD_translateY_in,\n          currentYOffset,\n          currentScene,\n        )}%, 0)`;\n      } else {\n        // out\n        messageD.style.opacity = `${calcValues(messageD_opacity_out, currentYOffset, currentScene)}`;\n        messageD.style.transform = `translate3d(0, ${calcValues(\n          messageD_translateY_out,\n          currentYOffset,\n          currentScene,\n        )}%, 0)`;\n      }\n      break;\n    }\n    case 1: {\n      break;\n    }\n    case 2: {\n      const {\n        messageA_opacity_in,\n        messageA_opacity_out,\n        messageA_translateY_in,\n        messageA_translateY_out,\n        messageB_opacity_in,\n        messageB_opacity_out,\n        messageB_translateY_in,\n        messageB_translateY_out,\n        messageC_opacity_in,\n        messageC_opacity_out,\n        messageC_translateY_in,\n        messageC_translateY_out,\n        pinB_opacity_in,\n        pinB_opacity_out,\n        pinB_scaleY,\n        pinC_opacity_in,\n        pinC_opacity_out,\n        pinC_scaleY,\n        imageSequence,\n        canvas_opacity_in,\n        canvas_opacity_out,\n      } = values as Section2Values;\n      const { messageA, messageB, messageC, pinB, pinC, context, canvas, videoImages } = objs as Section2Objs;\n      const triggerA = ((messageA_opacity_in.end || 0) + (messageA_opacity_out.start || 0)) / 2;\n      const triggerB = ((messageB_opacity_in.end || 0) + (messageB_opacity_out.start || 0)) / 2;\n      const triggerC = ((messageC_opacity_in.end || 0) + (messageC_opacity_out.start || 0)) / 2;\n      if (scene2) {\n        smoothingVideo(prevScrollHeight, imageSequence, videoImages, canvas, context);\n        scene2 = false;\n      }\n      // const sequence = Math.round(calcValues(imageSequence, currentYOffset, currentScene));\n      // context.drawImage(videoImages[sequence], 0, 0);\n      if (scrollRatio <= 0.5) {\n        canvas.style.opacity = `${calcValues(canvas_opacity_in, currentYOffset, currentScene)}`;\n      } else {\n        canvas.style.opacity = `${calcValues(canvas_opacity_out, currentYOffset, currentScene)}`;\n      }\n      if (scrollRatio <= triggerA) {\n        // in\n        messageA.style.opacity = `${calcValues(messageA_opacity_in, currentYOffset, currentScene)}`;\n        messageA.style.transform = `translate3d(0, ${calcValues(\n          messageA_translateY_in,\n          currentYOffset,\n          currentScene,\n        )}%, 0)`;\n      } else {\n        // out\n        messageA.style.opacity = `${calcValues(messageA_opacity_out, currentYOffset, currentScene)}`;\n        messageA.style.transform = `translate3d(0, ${calcValues(\n          messageA_translateY_out,\n          currentYOffset,\n          currentScene,\n        )}%, 0)`;\n      }\n      if (scrollRatio <= triggerB) {\n        // in\n        messageB.style.opacity = `${calcValues(messageB_opacity_in, currentYOffset, currentScene)}`;\n        messageB.style.transform = `translate3d(0, ${calcValues(\n          messageB_translateY_in,\n          currentYOffset,\n          currentScene,\n        )}%, 0)`;\n        pinB.style.transform = `scaleY(${calcValues(pinB_scaleY, currentYOffset, currentScene)})`;\n      } else {\n        // out\n        messageB.style.opacity = `${calcValues(messageB_opacity_out, currentYOffset, currentScene)}`;\n        messageB.style.transform = `translate3d(0, ${calcValues(\n          messageB_translateY_out,\n          currentYOffset,\n          currentScene,\n        )}%, 0)`;\n      }\n      if (scrollRatio <= triggerC) {\n        // in\n        messageC.style.opacity = `${calcValues(messageC_opacity_in, currentYOffset, currentScene)}`;\n        messageC.style.transform = `translate3d(0, ${calcValues(\n          messageC_translateY_in,\n          currentYOffset,\n          currentScene,\n        )}%, 0)`;\n        pinC.style.transform = `scaleY(${calcValues(pinC_scaleY, currentYOffset, currentScene)})`;\n      } else {\n        // out\n        messageC.style.opacity = `${calcValues(messageC_opacity_out, currentYOffset, currentScene)}`;\n        messageC.style.transform = `translate3d(0, ${calcValues(\n          messageC_translateY_out,\n          currentYOffset,\n          currentScene,\n        )}%.0 )`;\n      }\n      // 3 section canvas 미리 그리기\n      if (scrollRatio >= 0.9) {\n        const objs = sceneInfo[3].objs as Section3Objs;\n        const values = sceneInfo[3].values as Section3Values;\n        const { canvas, context, images } = objs;\n        const { rect1X, rect2X } = values;\n        const widthRatio = window.innerWidth / canvas.width;\n        const heightRatio = window.innerHeight / canvas.height;\n        const canvasScaleRatio = Math.max(widthRatio, heightRatio);\n        canvas.style.transform = `scale(${canvasScaleRatio})`;\n        context.fillStyle = \"white\";\n        context.drawImage(images[0], 0, 0);\n\n        // 캔버스 사이즈에 맞춰 가정한 innerWidth와 innerHeight\n        const recalculatedInnerWidth = document.body.offsetWidth / canvasScaleRatio;\n        const recalculatedInnerHeight = window.innerHeight / canvasScaleRatio;\n\n        const whiteRectWidth = recalculatedInnerWidth * 0.15;\n        rect1X.in = (canvas.width - recalculatedInnerWidth) / 2;\n        rect1X.out = rect1X.in - whiteRectWidth;\n        rect2X.in = rect1X.in + recalculatedInnerWidth - whiteRectWidth;\n        rect2X.out = rect2X.in + whiteRectWidth;\n\n        context.fillRect(rect1X.in, 0, Math.floor(whiteRectWidth), recalculatedInnerHeight);\n        context.fillRect(rect2X.in, 0, Math.floor(whiteRectWidth), recalculatedInnerHeight);\n      }\n      break;\n    }\n    case 3: {\n      // 가로/세로 모두 꽉 차게 하기 위해 여기서 계산 필요\n      const { canvas, context, images, canvasCaption } = objs as Section3Objs;\n      const {\n        rect1X,\n        rect2X,\n        rectStartY,\n        imageBlendHeight,\n        canvas_scale,\n        canvasCaption_opacity,\n        canvasCaption_translateY,\n      } = values as Section3Values;\n      const widthRatio = window.innerWidth / canvas.width;\n      const heightRatio = window.innerHeight / canvas.height;\n      const canvasScaleRatio = Math.max(widthRatio, heightRatio);\n      canvas.style.transform = `scale(${canvasScaleRatio})`;\n      context.fillStyle = \"white\";\n      context.drawImage(images[0], 0, 0);\n\n      // 캔버스 사이즈에 맞춰 가정한 innerWidth와 innerHeight\n      const recalculatedInnerWidth = document.body.offsetWidth / canvasScaleRatio;\n      const recalculatedInnerHeight = window.innerHeight / canvasScaleRatio;\n      if (rectStartY === 0) {\n        // (values as Section3Values).rectStartY = canvas.getBoundingClientRect().top;\n        (values as Section3Values).rectStartY =\n          canvas.offsetTop + (canvas.height - canvas.height * canvasScaleRatio) / 2;\n        rect1X.start = window.innerHeight / 2 / scrollHeight;\n        rect2X.start = window.innerHeight / 2 / scrollHeight;\n        rect1X.end = (values as Section3Values).rectStartY / scrollHeight;\n        rect2X.end = (values as Section3Values).rectStartY / scrollHeight;\n      }\n      const whiteRectWidth = recalculatedInnerWidth * 0.15;\n      rect1X.in = (canvas.width - recalculatedInnerWidth) / 2;\n      rect1X.out = rect1X.in - whiteRectWidth;\n      rect2X.in = rect1X.in + recalculatedInnerWidth - whiteRectWidth;\n      rect2X.out = rect2X.in + whiteRectWidth;\n\n      // context.fillRect(rect1X.in, 0, Math.floor(whiteRectWidth), recalculatedInnerHeight);\n      // context.fillRect(rect2X.in, 0, Math.floor(whiteRectWidth), recalculatedInnerHeight);\n      context.fillRect(\n        Math.floor(calcValues(rect1X, currentYOffset, currentScene)),\n        0,\n        Math.floor(whiteRectWidth),\n        recalculatedInnerHeight,\n      );\n      context.fillRect(\n        calcValues(rect2X, currentYOffset, currentScene),\n        0,\n        Math.floor(whiteRectWidth),\n        recalculatedInnerHeight,\n      );\n      if (scrollRatio < rect1X.end) {\n        canvas.classList.remove(\"sticky\");\n      } else {\n        imageBlendHeight.out = canvas.height;\n        imageBlendHeight.start = rect1X.end;\n        imageBlendHeight.end = imageBlendHeight.start + 0.2;\n        const blendHeight = calcValues(imageBlendHeight, currentYOffset, currentScene);\n        context.drawImage(\n          images[1],\n          0,\n          canvas.height - blendHeight,\n          canvas.width,\n          blendHeight,\n          0,\n          canvas.height - blendHeight,\n          canvas.width,\n          blendHeight,\n        );\n\n        canvas.classList.add(\"sticky\");\n        canvas.style.top = `${-(canvas.height - canvas.height * canvasScaleRatio) / 2}px`;\n        if (scrollRatio > imageBlendHeight.end) {\n          canvas_scale.in = canvasScaleRatio;\n          canvas_scale.out = document.body.offsetWidth / (1.5 * canvas.width);\n          canvas_scale.start = imageBlendHeight.end;\n          canvas_scale.end = imageBlendHeight.end + 0.2;\n\n          canvas.style.transform = `scale(${calcValues(canvas_scale, currentYOffset, currentScene)})`;\n          canvas.style.marginTop = \"0\";\n        }\n        if (scrollRatio > canvas_scale.end && canvas_scale.end > 0) {\n          canvas.classList.remove(\"sticky\");\n          canvas.style.marginTop = `${scrollHeight * 0.4}px`;\n\n          canvasCaption_opacity.start = canvas_scale.end;\n          canvasCaption_opacity.end = canvas_scale.end + 0.1;\n          canvasCaption_translateY.start = canvas_scale.end;\n          canvasCaption_translateY.end = canvas_scale.end + 0.1;\n          canvasCaption.style.opacity = `${calcValues(canvasCaption_opacity, currentYOffset, currentScene)}`;\n          canvasCaption.style.transform = `translate3d(0, ${calcValues(\n            canvasCaption_translateY,\n            currentYOffset,\n            currentScene,\n          )}%, 0)`;\n        }\n      }\n      break;\n    }\n  }\n}\n\n","import { sceneInfo, Section1Objs, Section2Objs } from \"./sceneInfo\";\n\nexport function setLayout(yOffset: number, currentScene: number) {\n  // 각 스크롤 섹션의 높이 세팅\n  sceneInfo.map((item) => {\n    if (item.type === \"sticky\") {\n      item.scrollHeight = item.heightNum * window.innerHeight;\n    } else {\n      item.scrollHeight = item.objs.container.offsetHeight;\n    }\n    item.objs.container.style.height = `${item.scrollHeight}px`;\n  });\n  let totalScrollHeight = 0;\n  for (let i = 0; i < sceneInfo.length; i++) {\n    totalScrollHeight += sceneInfo[i].scrollHeight;\n    if (totalScrollHeight >= yOffset) {\n      currentScene = i;\n      break;\n    }\n  }\n  document.body.setAttribute(\"id\", `show-scene-${currentScene}`);\n  const heightRatio = Math.max(window.innerHeight / 1080, window.innerWidth / 1920);\n  (sceneInfo[0].objs as Section1Objs).canvas.style.transform = `translate3d(-50%, -50%, 0) scale(${heightRatio})`;\n  (sceneInfo[2].objs as Section2Objs).canvas.style.transform = `translate3d(-50%, -50%, 0) scale(${heightRatio})`;\n}\n","import { sceneInfo, Section1Objs, Section1Values, Section2Objs, Section2Values, Section3Objs } from \"./sceneInfo\";\n\nexport function setCanvasImages() {\n  let imgElem1;\n  const objs1 = sceneInfo[0].objs as Section1Objs;\n  const values1 = sceneInfo[0].values as Section1Values;\n  for (let i = 0; i < values1.videoImageCount; i++) {\n    imgElem1 = new Image();\n    imgElem1.src = `./video/003/IMG_${String(1 + i).padStart(3, \"0\")}.JPG`;\n    objs1.videoImages.push(imgElem1);\n  }\n  let imgElem2;\n  const objs2 = sceneInfo[2].objs as Section2Objs;\n  const values2 = sceneInfo[2].values as Section2Values;\n  for (let i = 0; i < values2.videoImageCount; i++) {\n    imgElem2 = new Image();\n    imgElem2.src = `./video/004/IMG-${156 + i}.JPG`;\n    objs2.videoImages.push(imgElem2);\n  }\n  let imgElem3;\n  const objs3 = sceneInfo[3].objs as Section3Objs;\n  for (let i = 0; i < objs3.imagesPath.length; i++) {\n    imgElem3 = new Image();\n    imgElem3.src = objs3.imagesPath[i];\n    objs3.images.push(imgElem3);\n  }\n}\n","import { sceneInfo, Section1Objs, ValueProps } from \"./sceneInfo\";\nimport { playAnimation } from \"./main\";\nimport { setLayout } from \"./setLayout\";\nimport { setCanvasImages } from \"./setCanvasImages\";\nimport { calcValues } from \"./calcValue\";\n\n// let yOffset = 0; // window.pageYOffset 대신 쓸 변수\nlet prevScrollHeight = 0; // 현재 스크롤 위치(yOffset)보다 이전에 위치한 스크롤 섹션들의 스크롤 높이값의 합\nlet currentScene = 0; // 현재 활성화된(눈 앞에 보고 있는) 씬(scroll-section)\n\nfunction checkMenu(yOffset: number) {\n  if (yOffset > 44) {\n    document.body.classList.add(\"local-nav-sticky\");\n  } else {\n    document.body.classList.remove(\"local-nav-sticky\");\n  }\n}\n\nfunction scrollLoop(yOffset: number) {\n  prevScrollHeight = 0;\n  let entering = false; // debounce\n  for (let i = 0; i < currentScene; i++) {\n    prevScrollHeight += sceneInfo[i].scrollHeight;\n  }\n  if (yOffset < prevScrollHeight + sceneInfo[currentScene].scrollHeight) {\n    document.body.classList.remove(\"scroll-effect-end\");\n  }\n  if (yOffset > prevScrollHeight + sceneInfo[currentScene].scrollHeight) {\n    entering = true;\n    if (currentScene === sceneInfo.length - 1) {\n      document.body.classList.add(\"scroll-effect-end\");\n    }\n    if (currentScene < sceneInfo.length - 1) {\n      currentScene++;\n    }\n    document.body.setAttribute(\"id\", `show-scene-${currentScene}`);\n  }\n  if (yOffset < prevScrollHeight) {\n    entering = true;\n    if (currentScene === 0) return;\n    currentScene--;\n    document.body.setAttribute(\"id\", `show-scene-${currentScene}`);\n  }\n  if (entering) return;\n  playAnimation(yOffset, prevScrollHeight, currentScene);\n}\n\nexport function smoothingVideo(\n  prevScrollHeight: number,\n  imageSequence: ValueProps,\n  videoImages: HTMLImageElement[],\n  canvas: HTMLCanvasElement,\n  context: CanvasRenderingContext2D,\n) {\n  let acc = 0.1;\n  let delayedYOffset = 0;\n  let rafId;\n  let rafState: boolean;\n  // const widthRatio = window.innerWidth / canvas.width;\n  // const heightRatio = window.innerHeight / canvas.height;\n  // const canvasScaleRatio = Math.max(widthRatio, heightRatio);\n  // canvas.style.transform = `scale(${canvasScaleRatio})`;\n  function loop() {\n    delayedYOffset = delayedYOffset + (pageYOffset - delayedYOffset) * acc;\n    const currentYOffset = delayedYOffset - prevScrollHeight;\n    if (currentScene === 0 || currentScene === 2) {\n      const sequence = Math.round(calcValues(imageSequence, currentYOffset, currentScene));\n      if (videoImages[sequence]) {\n        context.drawImage(videoImages[sequence], 0, 0);\n      }\n    }\n\n    rafId = requestAnimationFrame(loop);\n    if (Math.abs(pageYOffset - delayedYOffset) < 1) {\n      cancelAnimationFrame(rafId);\n      rafState = false;\n    }\n  }\n  window.addEventListener(\"scroll\", () => {\n    if (!rafState) {\n      rafId = requestAnimationFrame(loop);\n      rafState = true;\n    }\n  });\n}\n\nfunction afterLoaded() {\n  window.addEventListener(\"resize\", () => {\n    if (window.innerWidth > 900) {\n      window.location.reload();\n      // setLayout(window.pageYOffset, currentScene);\n      // sceneInfo[3].values.rectStartY = 0;\n    }\n  });\n  window.addEventListener(\"orientationchange\", () => {\n    window.scrollTo(0, 0);\n    setTimeout(() => {\n      // setLayout(window.pageYOffset, currentScene);\n      // sceneInfo[3].values.rectStartY = 0;\n      window.location.reload();\n    }, 500);\n  });\n  window.addEventListener(\"scroll\", () => {\n    scrollLoop(window.pageYOffset);\n    checkMenu(window.pageYOffset);\n  });\n  (document.querySelector(\".loading\") as HTMLDivElement).addEventListener(\"transitionend\", (e) => {\n    document.body.removeChild(e.currentTarget as HTMLDivElement);\n  });\n}\n\nwindow.addEventListener(\"load\", () => {\n  document.body.classList.remove(\"before-load\");\n\n  setLayout(window.pageYOffset, currentScene);\n  const objs = sceneInfo[0].objs as Section1Objs;\n  objs.context.drawImage(objs.videoImages[0], 0, 0);\n  let tempYOffset = pageYOffset;\n  let tempScrollCount = 0;\n  if (tempYOffset > 0) {\n    let siId = setInterval(() => {\n      window.scrollTo(0, tempYOffset);\n      tempYOffset += 2;\n      if (tempScrollCount++ > 10) {\n        clearInterval(siId);\n      }\n    }, 20);\n  }\n  afterLoaded();\n});\nsetCanvasImages();\nsetLayout(window.pageYOffset, currentScene);\n","import \"./js/init\";"]}